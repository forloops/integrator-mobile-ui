<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:IntegratorMobile.UI.Controls;assembly=IntegratorMobile.UI"
             x:Class="IntegratorMobile.Views.Appointments.CompleteAppointmentPage"
             Title="Complete Appointment"
             BackgroundColor="{StaticResource BackgroundSecondary}">
    
    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">
            
            <!-- Checklist -->
            <Label Text="COMPLETION CHECKLIST" Style="{StaticResource Caption}" Margin="4,0,0,0" />
            
            <controls:AppCard>
                <VerticalStackLayout Spacing="12">
                    
                    <!-- Arrival Photo Check -->
                    <HorizontalStackLayout Spacing="12">
                        <Border WidthRequest="24" HeightRequest="24"
                                BackgroundColor="{StaticResource Success}"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 12">
                            <Label Text="✓" TextColor="White" FontSize="14"
                                   HorizontalOptions="Center" VerticalOptions="Center" />
                        </Border>
                        <Label Text="Arrival photo captured"
                               Style="{StaticResource BodyMedium}"
                               VerticalOptions="Center" />
                    </HorizontalStackLayout>
                    
                    <BoxView HeightRequest="1" Color="{StaticResource BorderLight}" />
                    
                    <!-- Work Items Check -->
                    <HorizontalStackLayout Spacing="12">
                        <Border x:Name="WorkItemsCheckIcon"
                                WidthRequest="24" HeightRequest="24"
                                BackgroundColor="{StaticResource Warning}"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 12">
                            <Label Text="!" TextColor="White" FontSize="14" FontAttributes="Bold"
                                   HorizontalOptions="Center" VerticalOptions="Center" />
                        </Border>
                        <VerticalStackLayout VerticalOptions="Center">
                            <Label x:Name="WorkItemsLabel"
                                   Text="2 of 3 work items completed"
                                   Style="{StaticResource BodyMedium}" />
                            <Label x:Name="WorkItemsSubLabel"
                                   Text="1 item marked 'Need to Return'"
                                   Style="{StaticResource Caption}"
                                   TextColor="{StaticResource Warning}" />
                        </VerticalStackLayout>
                    </HorizontalStackLayout>
                    
                </VerticalStackLayout>
            </controls:AppCard>
            
            <!-- Work Item Summary -->
            <Label Text="WORK ITEM SUMMARY" Style="{StaticResource Caption}" Margin="4,8,0,0" />
            
            <controls:AppCard CardPadding="0">
                <VerticalStackLayout>
                    
                    <!-- Completed Item -->
                    <Grid Padding="16" ColumnDefinitions="Auto,*,Auto">
                        <Border WidthRequest="32" HeightRequest="32"
                                BackgroundColor="{StaticResource SuccessLight}"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 16">
                            <Label Text="✓" TextColor="{StaticResource Success}" FontSize="16"
                                   HorizontalOptions="Center" VerticalOptions="Center" />
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Margin="12,0" VerticalOptions="Center">
                            <Label Text="Annual HVAC Inspection" 
                                   Style="{StaticResource BodyMedium}" />
                            <Label Text="Building A - HVAC Unit 1" 
                                   Style="{StaticResource Caption}" />
                        </VerticalStackLayout>
                        <controls:AppBadge Grid.Column="2" Text="COMPLETED" BadgeType="Completed" />
                    </Grid>
                    
                    <BoxView HeightRequest="1" Color="{StaticResource BorderLight}" Margin="16,0" />
                    
                    <!-- Completed Item -->
                    <Grid Padding="16" ColumnDefinitions="Auto,*,Auto">
                        <Border WidthRequest="32" HeightRequest="32"
                                BackgroundColor="{StaticResource SuccessLight}"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 16">
                            <Label Text="✓" TextColor="{StaticResource Success}" FontSize="16"
                                   HorizontalOptions="Center" VerticalOptions="Center" />
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Margin="12,0" VerticalOptions="Center">
                            <Label Text="Replace Air Filters" 
                                   Style="{StaticResource BodyMedium}" />
                            <Label Text="Building A - HVAC Unit 1" 
                                   Style="{StaticResource Caption}" />
                        </VerticalStackLayout>
                        <controls:AppBadge Grid.Column="2" Text="COMPLETED" BadgeType="Completed" />
                    </Grid>
                    
                    <BoxView HeightRequest="1" Color="{StaticResource BorderLight}" Margin="16,0" />
                    
                    <!-- Need to Return Item -->
                    <Grid Padding="16" ColumnDefinitions="Auto,*,Auto">
                        <Border WidthRequest="32" HeightRequest="32"
                                BackgroundColor="{StaticResource WarningLight}"
                                StrokeThickness="0"
                                StrokeShape="RoundRectangle 16">
                            <Label Text="!" TextColor="{StaticResource Warning}" FontSize="16" FontAttributes="Bold"
                                   HorizontalOptions="Center" VerticalOptions="Center" />
                        </Border>
                        <VerticalStackLayout Grid.Column="1" Margin="12,0" VerticalOptions="Center">
                            <Label Text="Annual HVAC Inspection" 
                                   Style="{StaticResource BodyMedium}" />
                            <Label Text="Building A - HVAC Unit 2" 
                                   Style="{StaticResource Caption}" />
                        </VerticalStackLayout>
                        <controls:AppBadge Grid.Column="2" Text="NEED TO RETURN" BadgeType="NeedToReturn" />
                    </Grid>
                    
                </VerticalStackLayout>
            </controls:AppCard>
            
            <!-- Warning for Need to Return -->
            <Border BackgroundColor="{StaticResource WarningLight}"
                    StrokeThickness="0"
                    StrokeShape="RoundRectangle 8"
                    Padding="16">
                <HorizontalStackLayout Spacing="12">
                    <Label Text="⚠️" FontSize="20" VerticalOptions="Start" />
                    <VerticalStackLayout Spacing="4">
                        <Label Text="Return Visit Required"
                               Style="{StaticResource BodyMedium}"
                               FontFamily="InterSemiBold"
                               TextColor="{StaticResource Warning}" />
                        <Label Text="You will be prompted to schedule a return visit after completing this appointment."
                               Style="{StaticResource BodySmall}" />
                    </VerticalStackLayout>
                </HorizontalStackLayout>
            </Border>
            
            <!-- Complete Button -->
            <controls:AppButton Text="COMPLETE APPOINTMENT"
                               Variant="Success"
                               IsBlock="True"
                               Clicked="OnCompleteClicked" />
            
            <!-- Cancel Button -->
            <Button Text="Cancel"
                    TextColor="{StaticResource TextSecondary}"
                    BackgroundColor="Transparent"
                    HorizontalOptions="Center"
                    Clicked="OnCancelClicked" />
            
        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>
