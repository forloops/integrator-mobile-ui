<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:controls="clr-namespace:IntegratorMobile.UI.Controls;assembly=IntegratorMobile.UI"
             x:Class="IntegratorMobile.Views.Auth.ForgotPasswordPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="{StaticResource BackgroundSecondary}">
    
    <ScrollView>
        <VerticalStackLayout Padding="24"
                             Spacing="24"
                             VerticalOptions="Center">
            
            <!-- Back Button -->
            <HorizontalStackLayout>
                <Button Text="â€¹ Back"
                        TextColor="{StaticResource TextPrimary}"
                        BackgroundColor="Transparent"
                        FontFamily="InterSemiBold"
                        Clicked="OnBackClicked" />
            </HorizontalStackLayout>
            
            <!-- Header -->
            <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                <Label Text="Forgot your Password?"
                       Style="{StaticResource HeadingLarge}"
                       HorizontalOptions="Center" />
                <Label Text="Enter your username to receive a code via text message."
                       Style="{StaticResource BodyMedium}"
                       TextColor="{StaticResource TextSecondary}"
                       HorizontalTextAlignment="Center" />
            </VerticalStackLayout>
            
            <!-- Card -->
            <controls:AppCard CardPadding="24">
                <VerticalStackLayout Spacing="20">
                    
                    <!-- Alert (shown when result is available) -->
                    <Border x:Name="AlertBox"
                            IsVisible="False"
                            BackgroundColor="{StaticResource SuccessLight}"
                            Stroke="Transparent"
                            StrokeShape="RoundRectangle 8"
                            Padding="16">
                        <Label x:Name="AlertMessage"
                               TextColor="{StaticResource Success}"
                               FontFamily="InterMedium" />
                    </Border>
                    
                    <!-- Username Input -->
                    <controls:AppInput x:Name="UsernameInput"
                                      Label="Username"
                                      Placeholder="Enter your username"
                                      ReturnType="Go"
                                      Completed="OnUsernameCompleted" />
                    
                    <!-- Get Reset Code Button -->
                    <controls:AppButton x:Name="GetCodeButton"
                                       Text="GET RESET CODE"
                                       Variant="Primary"
                                       IsBlock="True"
                                       Clicked="OnGetCodeClicked" />
                    
                    <!-- Reset Password Button -->
                    <controls:AppButton Text="RESET PASSWORD FROM CODE"
                                       Variant="Outline"
                                       IsBlock="True"
                                       Clicked="OnResetPasswordClicked" />
                    
                    <!-- Forgot Username Link -->
                    <Label Text="Forgot username"
                           TextColor="{StaticResource Primary600}"
                           FontFamily="InterMedium"
                           HorizontalOptions="Center"
                           TextDecorations="Underline">
                        <Label.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnForgotUsernameClicked" />
                        </Label.GestureRecognizers>
                    </Label>
                    
                </VerticalStackLayout>
            </controls:AppCard>
            
        </VerticalStackLayout>
    </ScrollView>
    
</ContentPage>
